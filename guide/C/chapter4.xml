<!--
      (Do not remove this comment block.)
  Version: 1.7.6
  Last modified: December 26 2002
  Maintainers: 
               Chris Lyttle <chris@wilddev.net>
  Originally written by Carol Champagne.
  Translators:
               (translators put your name and email here)
-->

 <chapter id="chapter4">
  <title>Entering Transactions</title>
    <para>
This chapter will give you the basic information you need to enter transactions in GnuCash.   The next chapters address more specific cases you may have.
    </para>
    <para>
We mentioned before that transactions must consist of at least two parts, the part transferring money <emphasis>from</emphasis> an account and the part transferring money <emphasis>to</emphasis> an account.  Accountants call these parts of a transaction <emphasis>Ledger Entries</emphasis>.  In GnuCash, they are called <emphasis>Splits</emphasis>.
    </para>
  <sect1 id="registers1">
   <title>Overview of Registers</title>
    <para>
To view an account register, highlight the account name in the account tree window and double-click to open it.  You can also click the <guibutton>Open</guibutton> button in the tool bar or use the right mouse button menu to open the account.  GnuCash will display the account register window.
    </para>
    <para>
For example, here is a <guilabel>Checking Account - Register</guilabel>:
<screenshot id="register">
  <mediaobject>
    <imageobject>
      <imagedata fileref="figures/register.png"
      srccredit="Chris Lyttle" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>The Checking Account - Register</phrase>
	    </textobject>
	    <caption>
	       <para>This image shows the <guilabel>Checking Account -
	       Register</guilabel>.
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>
    </para>
    <para>
The title bar of the account register displays the account name, which in this case is <guilabel>Checking Account</guilabel>.   Below the title bar, the menu bar displays the menu items available within the account register, and the tool bar contains handy buttons that help you work with the account register.
    </para>
    <para>
Although each transaction has at least two splits, all you see in the basic register is a summary of the splits affecting the current account.  In the Transfer column, you can see the other account from which money is <emphasis>transferred</emphasis> into or out of this account.   If the transaction affects more than two accounts, GnuCash displays <guilabel>-- Split Transaction --</guilabel> to show it is a multiple-split transaction.  You can see the individual splits of each transaction by clicking the <guilabel>Split</guilabel> button in the tool bar.
    </para>
    <para>
For example, if you highlight the <guilabel>Paycheck</guilabel> register line above and click the <guilabel>Split</guilabel> button, you get an expanded transaction that looks like this:
<screenshot id="registersplit">
  <mediaobject>
    <imageobject>
      <imagedata fileref="figures/registersplit.png"
      srccredit="Chris Lyttle" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>A split transaction</phrase>
	    </textobject>
	    <caption>
	       <para>This image shows a split transaction.
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>

    </para>
    <para>
The first line of the transaction is the <emphasis>transaction line</emphasis>.   It contains a <guilabel>Date</guilabel>, optional <guilabel>Num</guilabel> (such as a check number), transaction <guilabel>Description</guilabel>, total amount affecting the current account (<guilabel>Tot Deposit</guilabel> here), and updated account <guilabel>Balance</guilabel> after the current transaction.  Note that in the expanded view, the <guilabel>Transfer</guilabel> column heading disappears, and there is no account name listed in that field.  This line shows you only a summary of the transaction's effect on the current account.  For more detailed information, you need to look below at the individual splits that make up the transaction.
    </para>
    <para>
The partial lines below the transaction line are the <emphasis>split lines</emphasis>, and they are separated by gray lines.   As you highlight one of the split lines, the column headings change to show the split-related  fields:

<screenshot id="registersplit2">
  <mediaobject>
    <imageobject>
      <imagedata fileref="figures/registersplit2.png"
      srccredit="Chris Lyttle" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>How split headings change</phrase>
	    </textobject>
	    <caption>
	       <para>This image shows how split headings change.
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>

    </para>
    <para>
Each split contains an optional <guilabel>Action</guilabel>, or type of split, which you can either type in or choose from a pull-down list. The split also contains an optional <guilabel>Memo</guilabel> which describes the split.  Each split affects an <guilabel>Account</guilabel>, which can be selected from a pull-down list of your accounts.  The <guilabel>R</guilabel> field indicates whether the split has been reconciled.  The last two columns show the amount of the split and whether money is coming into or going out of the account.
    </para>
    <para>
As we discussed in section 2.1, total debits (left-column entries) must equal total credits (right-column entries) for each transaction.  In the example shown above, the total debits equal the total credits, so this transaction is balanced.   If you notice, the transaction line contains the same debit amount as the <guilabel>Checking Account</guilabel> split line.  Why is this shown twice?  Because the transaction line is merely a <emphasis>summary</emphasis> of the transaction's effect on the current account.   The same transaction in a different account will have a different transaction line, one that shows the effect on that particular account.  You can see this by highlighting another split line and clicking the <guilabel>Jump</guilabel> button on the tool bar.
    </para>
    <para>
In this example, if you jump to the <guilabel>Salary</guilabel> account, GnuCash brings up the same transaction in the <guilabel>Salary - Register</guilabel>:

<screenshot id="registersplit3">
  <mediaobject>
    <imageobject>
      <imagedata fileref="figures/registersplit3.png"
      srccredit="Chris Lyttle" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>A jump to the Salary account</phrase>
	    </textobject>
	    <caption>
	       <para>This image shows a jump to the <guilabel>Salary
	       </guilabel> account.
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>

    </para>
    <para>
Note that the transaction line total now summarizes the effect on the <guilabel>Salary</guilabel> account instead of the <guilabel>Checking Account</guilabel>, because you are looking at the <guilabel>Salary</guilabel> account register.    The splits are exactly the same, but the transaction line now reflects the credit to the <guilabel>Salary</guilabel> account.
    </para>
    <para>
At the bottom left of the register window, GnuCash displays helpful messages as you move about the register.   To the right, you can see the current account balance and the total of cleared splits.
    </para>
  </sect1>
  <sect1 id="regstyle1">
   <title>Choosing a Register Style</title>
    <para>
GnuCash offers several options for viewing your registers.  The default style is <guilabel>Basic Ledger</guilabel> mode, which displays only the summary of splits affecting the current account.  This is the style that most closely resembles other popular personal financial packages.
    </para>
     <para>
You can choose a different register style by selecting <guimenu>View</guimenu> -&gt; <guisubmenu>Style</guisubmenu> from the menu.  The <guimenuitem>Auto-Split Ledger</guimenuitem> style expands the current transaction automatically.  As you highlight a new transaction in the register, the transaction automatically expands to show all splits.    The <guimenuitem>Transaction Journal</guimenuitem> style is more like an accounting journal, in which all splits are shown for all transactions.
    </para>
     <para>
All styles permit you to view your data in either single-line or double-line format.  In the <guimenu>View</guimenu> -&gt; <guisubmenu>Style</guisubmenu> menu item, check the box next to <guimenuitem>Double Line</guimenuitem>, and you will see your transaction line expand to two register lines.
    </para>
  </sect1>
  <sect1 id="shortcuts1">
   <title>Using Entry Shortcuts</title>
    <para>
GnuCash provides several time-saving shortcuts for entering your data.  When you type the first few characters of a description that you have used before, the QuickFill feature automatically fills in the rest of the transaction as you last entered it.   When you type in the first characters of an account name in either the <guilabel>Transfer</guilabel> field of the transaction line or the <guilabel>Account</guilabel> field of the split line, QuickFill will automatically complete the name from your account list.  It also helps you with entering subaccounts in these fields: simply type the first characters of the parent account name followed by a colon and the first characters of the subaccount name.  For example, to enter <guilabel>Assets:Checking</guilabel>, you might type <userinput>A:C</userinput> and let GnuCash fill in the rest.
    </para>
    <para>
Register keyboard shortcuts also save you time, and GnuCash provides several of them.  In the date field, you can type:
    </para>
   <itemizedlist>
    <listitem>
     <para>
<keycap>+</keycap> or <keycap>=</keycap> to increment the date and <keycap>-</keycap> or <keycap>_</keycap> to decrement the date
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>]</keycap> or <keycap>}</keycap> to increment the month and <keycap>[</keycap> or <keycap>{</keycap> to decrement the month
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>M</keycap> or <keycap>m</keycap> to enter the first date of the month
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>H</keycap> or <keycap>h</keycap> to enter the last date of the month
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>Y</keycap> or <keycap>y</keycap> to enter the first date of the year
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>R</keycap> or <keycap>r</keycap> to enter the last date of the year
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>T</keycap> or <keycap>t</keycap> to enter today's date
    </para>
    </listitem>
   </itemizedlist>
     <para>
In the <guilabel>Num</guilabel> field of the transaction line, you can type <keycap>+</keycap> to increment the transaction number from the last one you typed in.  Typing <keycap>-</keycap> will decrement the number.  This will also work in the <guilabel>Action</guilabel> field of the split line, if you choose to enter split numbers there.  The <guilabel>Action</guilabel> field also supports QuickFill - if you type the first characters of a common action (such as <guilabel>Deposit</guilabel>), GnuCash will fill in the rest.
    </para>
     <para>
In any of the amount fields, you can use a built-in calculator.  Simply type in the first value, followed by <keycap>+</keycap>, <keycap>-</keycap>, <keycap>*</keycap>, or <keycap>/</keycap>, then type in the second value.  GnuCash will perform the calculation and return the resulting value to the amount field when you press the <keycap>Tab</keycap> key.
    </para>
     <para>
Most of the menu items have keyboard shortcuts, and these are marked by underlined characters in the menu names.  Press <keycap>Alt</keycap> + [underlined character] to bring up the menu,  then select an item by typing its underlined character.  For example, typing <keycombo><keycap>Alt</keycap><keycap>T</keycap></keycombo> brings up the Transaction menu, then typing <keycap>S</keycap> will split the transaction.  A few of the menu items use <keycap>Ctrl</keycap> key shortcuts instead, and these are listed next to the item.
    </para>
     <para>
To move around the register, use these keys to save time:
    </para>
   <itemizedlist>
    <listitem>
     <para>
<keycap>Tab</keycap> to move to the next field, <keycombo><keycap>Shift</keycap><keycap>Tab</keycap></keycombo> to move to the previous field
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>Home</keycap> to move to the beginning of the field, <keycap>End</keycap> to move to the end of the field
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>Enter</keycap> or <keycap>&darr;</keycap> to move to the next transaction, <keycap>&uarr;</keycap> to move to the previous transaction
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>Page Up</keycap> to move up one screen, <keycap>Page Down</keycap> to move down one screen
    </para>
    </listitem>
    <listitem>
     <para>
<keycombo><keycap>Shift</keycap><keycap>Page Up</keycap></keycombo> to go to the first transaction, <keycombo><keycap>Shift</keycap><keycap>Page Down</keycap></keycombo> to go to the last transaction
    </para>
    </listitem>
   </itemizedlist>
     <para>
In the <guilabel>Reconcile</guilabel> window you can use these keyboard shortcuts:
    </para>
   <itemizedlist>
    <listitem>
     <para>
<keycap>Tab</keycap> moves to the next box and <keycap>Shift</keycap><keycap>Tab</keycap> moves to the previous box
    </para>
    </listitem>
    <listitem>
     <para>
Space bar toggles the status between reconciled and not reconciled
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>&uarr;</keycap> and <keycap>&darr;</keycap> navigate through the entries within the current box
    </para>
    </listitem>
   </itemizedlist>
  </sect1>
  <sect1 id="puttoget1">
  <title>Putting It All Together</title>
  <para>
  Start by opening your <filename>gcashdata</filename> file that you last worked on in Chapter 3.  As a refresher, your main window should look something  like this:
  FIXME:This section needs redoing
<screenshot id="gcashdata2b">
  <mediaobject>
    <imageobject>
      <imagedata fileref="figures/gcashdata2.png"
      srccredit="Chris Lyttle" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>The dialog for a New Account</phrase>
	    </textobject>
	    <caption>
	       <para>This image shows the New Account Dialog.
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>
  </para>
  <orderedlist>
  <listitem>
  <para>
  Open the <guilabel>Checking Account</guilabel> register.  Select <guimenu>View</guimenu> -&gt; <guisubmenu>Style</guisubmenu> from the menu and check to make sure you are in Basic Ledger style.  You will view your transactions in the other modes later, but for now let's enter a basic transaction using the basic default style.
  </para>
  </listitem>
  <listitem>
  <para>
  From the <guilabel>Checking Account</guilabel> register window, enter a basic transaction to deposit your net pay of $800 into your checking account.  (Remember, basic transactions transfer money from a source account to a destination account.  Your source in this case is the <guilabel>Salary</guilabel> account, and your destination is the <guilabel>Checking Account</guilabel>.)   The transaction should look like this:
<screenshot id="transactex">
  <mediaobject>
    <imageobject>
      <imagedata fileref="figures/transactex.png"
      srccredit="Chris Lyttle" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>Entering a Paycheck transaction</phrase>
	    </textobject>
	    <caption>
	       <para>This image shows Entering a Paycheck transaction.
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>
Record the transaction.
  </para>
  </listitem>
  <listitem>
  <para>
  Now duplicate this transaction using the <guibutton>Duplicate</guibutton> button in the tool bar.    Enter the transaction date a week out in the future, and notice the blue line separator that GnuCash uses to separate future transactions from current ones:
<screenshot id="transactex2">
  <mediaobject>
    <imageobject>
      <imagedata fileref="figures/transactex2.png"
      srccredit="Chris Lyttle" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>The duplicated transaction</phrase>
	    </textobject>
	    <caption>
	       <para>This image shows the duplicated transaction.
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>
  </para>
  </listitem>
  <listitem>
  <para>
  Edit the transaction you just created so that it now shows gross salary and paycheck deductions for federal tax and FICA.  Since this is now going to be a multi-split transaction, click the <guibutton>Split</guibutton> button to enter the remaining splits. (Remember, in a multi-split transaction, you can have several source accounts and several destination accounts, but total debits must equal total credits for the transaction to balance.  In this case, your source account is Salary, but you now have 3 destination accounts: <guilabel>Checking Account</guilabel>, <guilabel>FedTax</guilabel>, and <guilabel>FICA</guilabel>.  You <emphasis>debit</emphasis> destination accounts and <emphasis>credit</emphasis> source accounts.)   Edit the transaction so that it shows:
  </para>
  <para>
  <table>
  <title>Split Example</title>
  <tgroup cols="4" align="left">
  <colspec colname="c1" />
  <colspec colname="c2" />
  <colspec colname="c3" />
  <colspec colname="c4" />
  <tbody>
  <row>
  <entry>Debit</entry>
  <entry>Checking</entry>
  <entry>800</entry>
  </row>
  <row>
  <entry>Debit</entry>
  <entry>FedTax</entry>
  <entry>200</entry>
  </row>
  <row>
  <entry>Debit</entry>
  <entry>FICA</entry>
  <entry>50</entry>
  </row>
  <row>
  <entry>Credit</entry>
  <entry>Salary</entry>
  <entry colname="c4">1050</entry>
  </row>
  </tbody>
  </tgroup>
  </table>
  </para>
  <note>
  <para>
  You will have to create expense type accounts for FedTax and FICA, since these accounts don't exist in your list, but you can easily do this by typing the account name in the split line Account field.  GnuCash will bring up the Account Information dialog and you can fill in the account details.
  </para>
  </note>
  <para>
  Here's what the transaction should look like:
<screenshot id="transactex3">
  <mediaobject>
    <imageobject>
      <imagedata fileref="figures/transactex3.png"
      srccredit="Chris Lyttle" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>The split transaction</phrase>
	    </textobject>
	    <caption>
	       <para>This image shows the split transaction.
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>
Press Enter to record the transaction.
  </para>
  </listitem>
  <listitem>
  <para>
  Enter another paycheck with a date set two weeks in the future.  This time, use QuickFill to enter your transaction.  On a blank transaction line, select the date from the drop-down calendar.  In the Description field, type "P" and watch GnuCash fill in the rest of the description for you.  Tab to the next field, and note that GnuCash inserts "-- Split Transaction --" in the Transfer field.  Tab again and note that GnuCash inserts the same deposit amount as the last transaction.  Record the transaction.
  </para>
  </listitem>
  <listitem>
  <para>
  Expand the transaction you just entered so that you can see the splits.  This time, instead of clicking the Split button in the tool bar, select the Auto-Split Ledger style from the Register|Style menu.  Move around the register and notice the difference between this style and the Basic Ledger style.  Now select the Transaction Journal style from the Register|Style menu, and notice the differences there.
  </para>
  </listitem>
  <listitem>
  <para>
  Let's look at another account register to see how this last paycheck transaction affected it.  In the expanded transaction, select the Salary account split, and click the Jump button in the tool bar.  You should now see the same transaction in the Salary account register:
<screenshot id="transactex4">
  <mediaobject>
    <imageobject>
      <imagedata fileref="figures/transactex4.png"
      srccredit="Chris Lyttle" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>The split transaction in the Salary Account</phrase>
	    </textobject>
	    <caption>
	       <para>This image shows the split transaction in the Salary Account.
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>
  </para>
  <para>
  Notice the transaction line is different, but all of the split lines are exactly the same.  You are now looking at this transaction in the Salary account, so the transaction line shows a summary of the effect on this account.
  </para>
  </listitem>
  <listitem>
  <para>
  You now know all you need to know to enter your transactions in GnuCash.  Return to the main window by closing the register windows, and note that some of your accounts now have balances.  Your chart of accounts should now look like this:
FIXME:insert chartaccts2.png
<screenshot id="gcashdata2c">
  <mediaobject>
    <imageobject>
      <imagedata fileref="figures/gcashdata.png"
      srccredit="Chris Lyttle" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>The dialog for a New Account</phrase>
	    </textobject>
	    <caption>
	       <para>This image shows the New Account Dialog.
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>

  </para>
  </listitem>
  </orderedlist>
  <para>
  Be sure to save your gcashdata file for future use.  The next five chapters address specific examples of transactions you may want to enter, and they continue with practice exercises at the end of each chapter.
  </para>
  </sect1>
 </chapter>
