<!--
      (Do not remove this comment block.)
  Version: 1.7.6
  Last modified: December 26 2002
  Maintainers: 
               Chris Lyttle <chris@wilddev.net>
  Originally written by Carol Champagne.
  Translators:
               (translators put your name and email here)
-->

 <chapter id="chapter4">
  <title>Transactions</title>
    <para>
This chapter will give you the basic information you need to understand and use transactions in GnuCash.  Whereas accounts are the framework and structure of a chart of accounts, transactions are the data which fills each account.
    </para>
  <sect1 id="txns_concepts1">
   <title>Basic Concepts</title>
    <para>
A <emphasis>transaction</emphasis> in a double entry accounting system such as GnuCash is an exchange between at least 2 accounts.  Thus, a single transaction must always consist of at least two parts, a "from" and a "to" account.  The "from" account is passing value to the "to" account.  Accountants call these parts of a transaction <emphasis>Ledger Entries</emphasis>.  In GnuCash, they are called <emphasis>Splits</emphasis>.
   </para>
   <para>
For example, you receive a paycheck and deposit it into your savings account at the bank.  The <emphasis>transaction</emphasis> that occurs is that your bank savings account (an asset) received money from your income account.  Two accounts are affected, and in this case there is a net increase in your equity.
   </para>
   <para>
Working with transactions in GnuCash is performed using what is known as the <emphasis>account register</emphasis>.  Every account you create has an account register.  It will appear familiar to you as it looks very similar to the log used to track checkbooks.
   </para>
  </sect1>

  <sect1 id="txns_registers1">
   <title>The Account Register</title>
    <para>
The <emphasis>account register</emphasis> is the GnuCash window which allows you to view or edit preexisting transactions, or add new transactions for a particular account.  To enter the account register, simply highlight the account name in the account tree window and double-click to open it.  You can also click the <guibutton>Open</guibutton> button in the tool bar or use the right mouse button menu to open the account.  GnuCash will display the account register window.
    </para>

    <sect2 id="txns_registers_twoaccount2">
      <title>Simple Two Account Transaction</title>
    <para>
For example, starting with the chart of accounts we created in the previous chapter, double click on the <guilabel>checking</guilabel> asset account.  Let's add a simple transaction to the checking account.  When you first create your accounts in GnuCash, it is common to start them off with an initial balance.  
   </para>
   <para>
In the first transaction row, enter a date (eg: June 1, 2003), a description (eg: "Initial"), click on the Transfer popup menu and select <guilabel>Equity:Starting Balances</guilabel>, add a deposit value of $1000, and press the Enter key.  The account register should now appear similar to this figure:
   </para>
     <screenshot id="txns_register_2account">
  <mediaobject>
    <imageobject>
      <imagedata fileref="figures/txns_register_2account.png"
      srccredit="Chris Lyttle" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>The Checking Account - Register</phrase>
	    </textobject>
	    <caption>
	       <para>This image shows <guilabel>Asset:Checking -
	       Register</guilabel> after inserting a starting value transaction.
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>
   <para>
Setting the starting balances of an account is an example of a simple two account transaction.  In this case, affecting the <guilabel>Asset:Checking</guilabel> and the <guilabel>Equity:Starting Balances</guilabel> accounts.
   </para>
   <para>
As another example of a simple 2 account transaction, add another transaction to describe the purchase of $45.21 worth of groceries.  From within the Asset:Checking account, you would set <guilabel>Transfer</guilabel> to <guilabel>Expenses:Groceries</guilabel>.  The account register should now appear:
   </para>
     <screenshot id="txns_register_2account2">
  <mediaobject>
    <imageobject>
      <imagedata fileref="figures/txns_register_2account2.png"
      srccredit="Chris Lyttle" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>The Checking Account - Register</phrase>
	    </textobject>
	    <caption>
	       <para>This image shows <guilabel>Asset:Checking -
	       Register</guilabel> after adding a transaction for groceries.
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>
  </sect2>

    <sect2 id="txns_registers_multiaccount2">
      <title>Multi Account Transaction</title>
  <para>
The need for a multi account transaction occurs when you need to split either the "from" or the "to" account in a transaction into multiple accounts.  The classic example of this is when you receive a paycheck.  Your take home pay from a paycheck will typically be less than your net pay, with the difference being due to taxes, retirement account payments, and/or other items.  Thus, the single transaction of you receiving a paycheck involves other accounts besides simply  <guilabel>Assets:Checking</guilabel> and <guilabel>Income:Salary</guilabel>.
  </para>
  <para>
To add a paycheck transaction from the <guilabel>Assets:Checking</guilabel> account register window, click on a new transaction line, and click on <guilabel>Split</guilabel>.  First enter the description of this transaction on the first line (eg: "Employers R Us").  In the "split" line below this, the the gross total of your paycheck (eg: $1000) as a withdrawal transfer from <guilabel>Income:Salary</guilabel>.  Now, individually insert deposits to <guilabel>Asset:Checking</guilabel> (eg: $670), <guilabel>Expenses:Taxes:Federal</guilabel> (eg: $180), <guilabel>Expenses:Taxes:Medicare</guilabel> (eg: $90), and <guilabel>Expenses:Taxes:Social Security</guilabel> (eg: $60).  The final split should look like this:
  </para>
     <screenshot id="txns_register_multiaccount">
  <mediaobject>
    <imageobject>
      <imagedata fileref="figures/txns_register_multiaccount.png"
      srccredit="Chris Lyttle" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>Account Register - Multi</phrase>
	    </textobject>
	    <caption>
	       <para>This image shows <guilabel>Asset:Checking -
	       Register</guilabel> after adding a multiaccount transaction for salary.
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>
   </sect2>

    <sect2 id="txns_registers_features2">
      <title>Features of the Account Register</title>
    <para>
The title bar of the account register displays the account name, which in this case is <guilabel>Asset:Checking</guilabel>.   Below the title bar, the menu bar displays the menu items available within the account register, and the tool bar contains handy buttons that help you work with the account register.
    </para>
    <para>
Although each transaction has at least two splits, all you see in the basic register is a summary of the splits affecting the current account.  In the Transfer column, you can see the other account from which money is <emphasis>transferred</emphasis> into or out of this account.   If the transaction affects more than two accounts, GnuCash displays <guilabel>-- Split Transaction --</guilabel> to show it is a multiple-split transaction.  You can see the individual splits of each transaction by clicking the <guilabel>Split</guilabel> button in the tool bar while selecting the appropriate transaction.
    </para>
    <para>
For split transactions, the first line of the transaction is the <emphasis>transaction line</emphasis>.   It contains a <guilabel>Date</guilabel>, optional <guilabel>Num</guilabel> (such as a check number), transaction <guilabel>Description</guilabel>, total amount affecting the current account (<guilabel>Tot Deposit</guilabel> here), and updated account <guilabel>Balance</guilabel> after the current transaction.  Note that in the expanded view, the <guilabel>Transfer</guilabel> column heading disappears, and there is no account name listed in that field.  This line shows you only a summary of the transaction's effect on the current account.  For more detailed information, you need to look at the individual splits that make up the transaction.
    </para>
    <para>
The partial lines below the transaction line are the <emphasis>split lines</emphasis>, and they are separated by gray lines.   As you highlight one of the split lines, the column headings change to show the split-related  fields:

<screenshot id="txns_registersplit2">
  <mediaobject>
    <imageobject>
      <imagedata fileref="figures/txns_registersplit2.png"
      srccredit="Chris Lyttle" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>How split headings change</phrase>
	    </textobject>
	    <caption>
	       <para>This image shows how split headings change.
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>

    </para>
    <para>
Each split contains an optional <guilabel>Action</guilabel>, or type of split, which you can either type in or choose from a pull-down list. The split also contains an optional <guilabel>Memo</guilabel> which describes the split.  Each split affects an <guilabel>Account</guilabel>, which can be selected from a pull-down list of your accounts.  The <guilabel>R</guilabel> field indicates whether the split has been reconciled.  The last two columns show the amount of the split and whether money is coming into or going out of the account.
    </para>
    <para>
As we discussed in section 2.1, total debits (left-column entries) must equal total credits (right-column entries) for each transaction.  In the example shown above, the total debits equal the total credits, so this transaction is balanced.   If you notice, the transaction line contains the same debit amount as the <guilabel>Checking</guilabel> split line.  Why is this shown twice?  Because the transaction line is merely a <emphasis>summary</emphasis> of the transaction's effect on the current account.   The same transaction in a different account will have a different transaction line, one that shows the effect on that particular account.  You can see this by highlighting another split line and clicking the <guilabel>Jump</guilabel> button on the tool bar.
    </para>
    <para>
In this example, if you jump to the <guilabel>Income:Salary</guilabel> account, GnuCash brings up the same transaction in the <guilabel>Income:Salary - Register</guilabel>:

<screenshot id="txns_registersplit3">
  <mediaobject>
    <imageobject>
      <imagedata fileref="figures/txns_registersplit3.png"
      srccredit="Chris Lyttle" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>A jump to the Income:Salary account</phrase>
	    </textobject>
	    <caption>
	       <para>This image shows a jump to the <guilabel>Income:Salary
	       </guilabel> account.
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>

    </para>
    <para>
Note that the transaction line total now summarizes the effect on the <guilabel>Income:Salary</guilabel> account instead of the <guilabel>Checking Account</guilabel>, because you are looking at the <guilabel>Income:Salary</guilabel> account register.    The splits are exactly the same, but the transaction line now reflects the credit to the <guilabel>Income:Salary</guilabel> account.
    </para>
    <para>
At the bottom left of the register window, GnuCash displays helpful messages as you move about the register.   To the right, you can see the current account balance and the total of cleared splits.
    </para>
   </sect2>
  </sect1>

  <sect1 id="txns_regstyle1">
   <title>Choosing a Register Style</title>
    <para>
GnuCash offers several options for viewing your registers.  The default style is <guilabel>Basic Ledger</guilabel> mode, which displays only the summary of splits affecting the current account.  This is the style that most closely resembles other popular personal financial packages.
    </para>
     <para>
You can choose a different register style by selecting <guimenu>View</guimenu> -&gt; <guisubmenu>Style</guisubmenu> from the menu.  The <guimenuitem>Auto-Split Ledger</guimenuitem> style expands the current transaction automatically.  As you highlight a new transaction in the register, the transaction automatically expands to show all splits.    The <guimenuitem>Transaction Journal</guimenuitem> style is more like an accounting journal, in which all splits are shown for all transactions.
    </para>
     <para>
All styles permit you to view your data in either single-line or double-line format.  In the <guimenu>View</guimenu> -&gt; <guisubmenu>Style</guisubmenu> menu item, check the box next to <guimenuitem>Double Line</guimenuitem>, and you will see your transaction line expand to two register lines.
    </para>
  </sect1>

  <sect1 id="txns_shortcuts1">
   <title>Using Entry Shortcuts</title>
    <para>
GnuCash provides several time-saving shortcuts for entering your data.  When you type the first few characters of a description that you have used before, the QuickFill feature automatically fills in the rest of the transaction as you last entered it.   When you type in the first characters of an account name in either the <guilabel>Transfer</guilabel> field of the transaction line or the <guilabel>Account</guilabel> field of the split line, QuickFill will automatically complete the name from your account list.  It also helps you with entering subaccounts in these fields: simply type the first characters of the parent account name followed by a colon and the first characters of the subaccount name.  For example, to enter <guilabel>Assets:Checking</guilabel>, you might type <userinput>A:C</userinput> and let GnuCash fill in the rest.
    </para>
    <para>
Register keyboard shortcuts also save you time, and GnuCash provides several of them.  In the date field, you can type:
    </para>
   <itemizedlist>
    <listitem>
     <para>
<keycap>+</keycap> or <keycap>=</keycap> to increment the date and <keycap>-</keycap> or <keycap>_</keycap> to decrement the date
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>]</keycap> or <keycap>}</keycap> to increment the month and <keycap>[</keycap> or <keycap>{</keycap> to decrement the month
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>M</keycap> or <keycap>m</keycap> to enter the first date of the month
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>H</keycap> or <keycap>h</keycap> to enter the last date of the month
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>Y</keycap> or <keycap>y</keycap> to enter the first date of the year
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>R</keycap> or <keycap>r</keycap> to enter the last date of the year
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>T</keycap> or <keycap>t</keycap> to enter today's date
    </para>
    </listitem>
   </itemizedlist>
     <para>
In the <guilabel>Num</guilabel> field of the transaction line, you can type <keycap>+</keycap> to increment the transaction number from the last one you typed in.  Typing <keycap>-</keycap> will decrement the number.  This will also work in the <guilabel>Action</guilabel> field of the split line, if you choose to enter split numbers there.  The <guilabel>Action</guilabel> field also supports QuickFill - if you type the first characters of a common action (such as <guilabel>Deposit</guilabel>), GnuCash will fill in the rest.
    </para>
     <para>
In any of the amount fields, you can use a built-in calculator.  Simply type in the first value, followed by <keycap>+</keycap>, <keycap>-</keycap>, <keycap>*</keycap>, or <keycap>/</keycap>, then type in the second value.  GnuCash will perform the calculation and return the resulting value to the amount field when you press the <keycap>Tab</keycap> key.
    </para>
     <para>
Most of the menu items have keyboard shortcuts, and these are marked by underlined characters in the menu names.  Press <keycap>Alt</keycap> + [underlined character] to bring up the menu,  then select an item by typing its underlined character.  For example, typing <keycombo><keycap>Alt</keycap><keycap>T</keycap></keycombo> brings up the Transaction menu, then typing <keycap>S</keycap> will split the transaction.  A few of the menu items use <keycap>Ctrl</keycap> key shortcuts instead, and these are listed next to the item.
    </para>
     <para>
To move around the register, use these keys to save time:
    </para>
   <itemizedlist>
    <listitem>
     <para>
<keycap>Tab</keycap> to move to the next field, <keycombo><keycap>Shift</keycap><keycap>Tab</keycap></keycombo> to move to the previous field
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>Home</keycap> to move to the beginning of the field, <keycap>End</keycap> to move to the end of the field
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>Enter</keycap> or <keycap>&darr;</keycap> to move to the next transaction, <keycap>&uarr;</keycap> to move to the previous transaction
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>Page Up</keycap> to move up one screen, <keycap>Page Down</keycap> to move down one screen
    </para>
    </listitem>
    <listitem>
     <para>
<keycombo><keycap>Shift</keycap><keycap>Page Up</keycap></keycombo> to go to the first transaction, <keycombo><keycap>Shift</keycap><keycap>Page Down</keycap></keycombo> to go to the last transaction
    </para>
    </listitem>
   </itemizedlist>
     <para>
In the <guilabel>Reconcile</guilabel> window you can use these keyboard shortcuts:
    </para>
   <itemizedlist>
    <listitem>
     <para>
<keycap>Tab</keycap> moves to the next box and <keycap>Shift</keycap><keycap>Tab</keycap> moves to the previous box
    </para>
    </listitem>
    <listitem>
     <para>
Space bar toggles the status between reconciled and not reconciled
    </para>
    </listitem>
    <listitem>
     <para>
<keycap>&uarr;</keycap> and <keycap>&darr;</keycap> navigate through the entries within the current box
    </para>
    </listitem>
   </itemizedlist>
  </sect1>

  <sect1 id="txns_puttoget1">
  <title>Putting It All Together</title>
  <para>
In the previous sections of this chapter the concepts and mechanics of working with transactions in GnuCash has been discussed.  This section will expand upon the chart of accounts initially built in the previous chapter.
  </para>
  <para>
Start by opening your chart of accounts file.  Assuming you have been following the progress of this example chart of accounts, you should have 3 transactions already saved within the checking account.  The main window should look something like this:
<screenshot id="txns_puttoget1">
  <mediaobject>
    <imageobject>
      <imagedata fileref="figures/txns_puttoget1.png"
      srccredit="Chris Lyttle" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>Starting point for Putting It All Together</phrase>
	    </textobject>
	    <caption>
	       <para>This image shows the starting point for this section.
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>
  </para>

  <sect2 id="txns_puttoget_open2">
  <title>Opening Balances</title>
  <para>
As shown earlier with the <guilabel>Asset:Checking</guilabel> account, the starting balances in an account are typically assigned to a special account called <guilabel>Equity:Starting Balances</guilabel>.  To start filling in this chart of account, begin by setting the starting balances for the accounts.  Assume that there is $1000 in the savings account and $500 charged on the credit card.  
  </para>
  <orderedlist>
  <listitem>
  <para>
  Open the <guilabel>Assets:Savings</guilabel> account register.  Select <guimenu>View</guimenu> -&gt; <guisubmenu>Style</guisubmenu> from the menu and check to make sure you are in Basic Ledger style.  You will view your transactions in the other modes later, but for now let's enter a basic transaction using the basic default style.
  </para>
  </listitem>
  <listitem>
  <para>
From the <guilabel>Asset:Savings</guilabel> account register window, enter a basic 2 account transaction to set your starting balance to $1000, transferred from <guilabel>Equity:Starting Balances</guilabel>.  Remember, basic transactions transfer money from a source account to a destination account.  Record the transaction (press the 'enter' key, or click on the 'enter' icon).
  </para>
  </listitem>
  <listitem>
  <para>
From the <guilabel>Asset:Checking</guilabel> account register window, confirm that you have already set the starting balance to $1000, transferred from <guilabel>Equity:Starting Balances</guilabel>.  This should already have been done previously from the example earlier in this chapter, but if not, do so now.
  </para>
  </listitem>
  <listitem>
  <para>
From the <guilabel>Liabilities:Visa</guilabel> account register window, enter a basic 2 account transaction to set your starting balance to $1000, transferred from <guilabel>Equity:Starting Balances</guilabel>.  This is done by entering the $500 as a "decrease", since it is money you borrowed.  Record the transaction (press the 'enter' key, or click on the 'enter' icon).
  </para>
  </listitem>
  </orderedlist>
  <para>
You should now have 3 accounts with opening balances set.  <guilabel>Assets:Checking</guilabel>, <guilabel>Assets:Savings</guilabel>, and <guilabel>Liabilities:Visa</guilabel>.
  </para>
  </sect2>

  <sect2 id="txns_puttoget_add2">
  <title>Additional Transaction Examples</title>

  <para>
Now add some more transactions to simulate a month's expenses.  During the month, $78 is spent on electricity, $45 on phone, and $350 on rent.  All paid by check.  Finally, let's move $100 from the savings account to the checking account.
  </para>

  <orderedlist>
  <listitem>
  <para>
Open the <guilabel>Expenses:Electricity</guilabel> account register and enter a simple 2 account transaction to pay the $78 electrical bill at the end of the current month (eg: June 30, 2003).  Enter a description (eg: Light Company) and the check number (eg: 101).  The <guilabel>Transfer</guilabel> account should be <guilabel>Assets:Checking</guilabel>.
  </para>
  </listitem>
  <listitem>
  <para>
Open the <guilabel>Assets:Checking</guilabel> account register and enter a simple 2 account transaction to pay the $45 phone bill at the end of the current month (eg: June 30, 2003).  Enter a description (eg: Phone Company Name) and the check number (eg: 102).  The <guilabel>Transfer</guilabel> account should be <guilabel>Expenses:Phone</guilabel>.  Notice that you can enter expense transactions from either the credit side (the expense accounts) or the debit side (the asset account).
  </para>
  </listitem>
  <listitem>
  <para>
Open the <guilabel>Expenses:Rent</guilabel> account register and enter a simple 2 account transaction to pay the $350 in rent at the end of the current month (eg: June 30, 2003).  Enter a description (eg: June Rent) and the check number (eg: 101).  The <guilabel>Transfer</guilabel> account should be <guilabel>Assets:Checking</guilabel>.
  </para>
  <para>
Duplicate this transaction using the <guibutton>Duplicate</guibutton> button in the tool bar.  Start by clicking on the current rent transaction, and click on the <guilabel>Duplicate</guilabel> icon.  Enter the transaction date a month out in the future (eg: July 31, 2003) and set the check number (eg: 102), and notice the blue line separator that GnuCash uses to separate future transactions from current ones.  In this way, you can enter transactions before they occur.
  </para>
  <para>
You could also set up a scheduled transaction to pay your rent, since the value of the rent is likely to be constant for the foreseeable future.  FIXME, add scheduled transaction stuff.
  </para>
  </listitem>
  <listitem>
  <para>
To transfer money from you savings account to your checking account, open the <guilabel>Assets:Savings</guilabel> account register, add a new transaction setting the Transfer to <guilabel>Assets:Checking</guilabel> in the amount of $1000.
  </para>
  </listitem>
  </orderedlist>

  </sect2>
  </sect1>
 </chapter>
