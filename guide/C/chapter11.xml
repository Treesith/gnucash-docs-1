<!--
      (Do not remove this comment block.)
  Version: 1.6.5
  Last modified: November 24, 2001
  Maintainers: 
               Chris Lyttle <chris@wilddev.net>
  Written by Chris Lyttle
  Originally designed by Carol Champagne.
  Translators:
               (translators put your name and email here)
-->
 <chapter id="chapter11">
 <title>Business: Accounts Receivable</title>
 <para>Accounts Receivable (or A/R) refers to products or services provided by the company on credit for which payment has not yet been received.</para>
 <sect1 id="bus_ar_concepts1">
 <title>Basic Concepts</title>
 <para>The accouting needs of a business can be quite different from that of a person.  Businesses have customers that own money, vendors which are owed money, employee payroll, more complex tax laws, etc.  GnuCash offers some business oriented features to help facilitate these needs.</para>
 <para>Accounts Receivable (A/R) and Accounts Payable (A/P) are used by businesses to record sales for which they are not immediately paid, or to record bills that they have received, but might not pay until later. These types of accounts are used primarily when you've got a lot of bills and receipts flowing in and out, and don't want to lose track of them just because you don't pay/get paid right away. For most home users, A/R and A/P are too complicated and confusing to be worth the effort.</para>
  <para>Accounts Receivable (or A/R) refers to products or services provided by the company on credit for which payment has not yet been received.  This is represented on the balance sheet as an asset, because the expectation is that you will receive payment soon.</para>
   </sect1>

  <sect1 id="bus_ar_setup1">
  <title>Initial Setup</title>
  <para>To setup GnuCash to work with handling accounts receivable for a company, there are 2 preliminary things that must be done.  The first thing to do is to build an appropriate Account Heirarchy and the second is to register the company in GnuCash.</para>
  <sect2 id="bus_ar_setupacct2">
  <title>Account Setup</title>
  <para>There are many different ways to setup a business account heirarchy.  You can start with the Business Accounts setup which is available from the New Account druid, or you could build one manually.  To access the prebuilt Business Accounts, start GnuCash and click on <guimenu>File</guimenu> -> <guimenu>New File</guimenu> and proceed until you see the list of available accounts, select Business Accounts.</para>
  <para>Most likely, the prebuilt Business Account heirarchy will not be perfect for your needs, you will need to do some amount of manual adjustments forit to function well with your situation.  This chapter will present example account structures which you can add to your existing accounts.</para>
  <para>Accounts Receivable (or A/R) refers to products or services provided by the company on credit for which payment has not yet been received.  This is represented on the balance sheet as an asset, because the expectation is that you will receive payment soon.  To use GnuCash's integrated accounts receivable system, you must first setup an account (usually a subaccount under Assets) defined with account type <emphasis>A/Receivable</emphasis>.  It is within this account that the integrated A/R system will place transactions.</para>
  <literallayout>
Basic A/R Account Heirarchy:

-Assets
   -Checking
   -Accounts Receivable
-Income
   -Sales
  </literallayout>

 <note>
 <para>Note that you will need to add additional asset, expense, and income accounts to this heirarchy for it to be useful.  But, the most important aspects of this heirarchy are the use of an income account and the Accounts Receivable asset account, with account type set to <emphasis>A/Receivable</emphasis>.</para>
 </note>
  </sect2>

  <sect2 id="bus_ar_setupcname2">
  <title>Register Your Company</title>
  <para>After you have built your account structure, you will want to register the GnuCash file as belonging to your company.  To do so, add your Business Name, Address and GST number.  Click on <guimenu>File</guimenu> -> <guimenu>Properties</guimenu>.  Type the Business name and address, add an empty line and add the GST number: <quote>GST: 1234-5678RT</quote>.  Click <guilabel>OK</guilabel>.</para>
 </sect2>
 
 </sect1>

 <sect1 id="bus_ar_components1">
 <title>System Components</title>
  <para>GnuCash has an integrated accounts receivable system.  The transactions generated by the A/R system will be placed within the Accounts Receivable account, as a record of what occurs, but you do not directly work within this account.  Rather, you will principally be working with the 4 integrated GnuCash A/R application components, available from the submenu <guimenu>Business</guimenu> -> <guimenu>Customers</guimenu>.  These 4 application components are:</para>

  <itemizedlist>
  <listitem>
  <para><guilabel>Customers</guilabel> are people or companies to whom you sell products or services on credit.</para>
  </listitem>
  <listitem>
  <para><guilabel>Invoices</guilabel> represent the physical invoice you send to a customer, requesting payment.  This invoice contains an itemized list of things you sold.</para>
  </listitem>
  <listitem>
  <para><guilabel>Jobs</guilabel> (optional) is where you register Customer Jobs, a grouping mechanism by which you can group invoices to a particular customer.</para>
  </listitem>
  <listitem>
  <para><guilabel>Process Payments</guilabel> is where you register money payments from a customer to  your company.</para>
  </listitem>
  </itemizedlist>

  <para>In the next 4 sections of this chapter, the above 4 application components will be introduced.</para>
 </sect1>

 <sect1 id="bus_ar_customers1">
 <title>Customers</title>
  <para>Customers are people of companies to whom you sell goods or services.  They must be registered within the A/R system.</para>

  <sect2 id="bus_ar_custnew2">
 <title>New</title>
 <para>To register a new customer, enter the menu <guimenu>Business</guimenu> -> <guimenu>Customer</guimenu> -> <guimenu>New Customer</guimenu>.  Fill in the appropriate billing address for the customer, such as Company Name, Address, Phone, Fax, etc.  Below is a list of the other options: </para>
 <itemizedlist>
 <listitem>
 <para><guilabel>Identification - Customer Number</guilabel> - can be any number you would like to use to refer to this customer, or you may leave it blank and a number will be chosen automatically.</para>
 </listitem>
 <listitem>
 <para><guilabel>Identification - Active</guilabel> - this checkbox is used to differentiate active customers from inactive ones, useful for when you have many past customers, and you want to see only the active.</para>
 </listitem>
 <listitem>
 <para><guilabel>Notes</guilabel> - you can enter any text you would like to in this area, additional commentaries about this customer.  For example, the names of contact people from within the customer's company.</para>
 </listitem>
 <listitem>
 <para><guilabel>Billing Information - Currency</guilabel> - here you can specify what the default billing currency will be.</para>
 </listitem>
 <listitem>
 <para><guilabel>Billing Information - Terms</guilabel> - here you can specify what the default billing terms will be for this customer.  These terms must be preregistered using <guimenu>Business</guimenu> -> <guimenu>Billing Terms</guimenu>.</para>
 </listitem>
 <listitem>
 <para><guilabel>Billing Information - Tax Included</guilabel> - this specifies whether tax has already been included in the invoice.  You can choose <guilabel>Yes</guilabel>, <guilabel>No</guilabel>, or <guilabel>Use Global</guilabel>.  Yes means that the tax is already included in the invoice, No means tax has not been included in the invoice, and Use Global means to use the global tax (Derek?).</para>
 </listitem>
 <listitem>
 <para><guilabel>Billing Information - Tax Table</guilabel> - this allows you to specify a specific preregistered tax table to apply to invoices to this customer.  Tax tables must be registered from the menu item <guimenu>Business</guimenu> -> <guimenu>Tax Table</guimenu>.</para>
 </listitem>
 <listitem>
 <para><guilabel>Shipping Address</guilabel> - if the customers shipping address is different from the billing address, you can enter this information in the third and final windows tab entitled <guilabel>Shipping Address</guilabel>.</para>
 </listitem>
 </itemizedlist>
 
 <para>This is what the New Customer registration window looks like:</para>
	<screenshot id="bus_ar_custnew">
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="figures/bus_ar_custnew.png" 
	      srccredit="Jon Lapham" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>New Customer Registration Window</phrase>
	    </textobject>
	    <caption>
	       <para>New Customer Registration Window</para>
	    </caption>
          </mediaobject>
        </screenshot>
 
 </sect2>
 <sect2 id="bus_ar_custfind2">
 <title>Find and Edit</title>

 <para>To search for a preexisting customer, use the <guimenu>Business</guimenu> -> <guimenu>Customers</guimenu> -> <guimenu>Find Customers</guimenu> application.  From the results of the search, you can select a customer to edit, or view.</para>

	<screenshot id="bus_ar_custfind">
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="figures/bus_ar_custfind.png" 
	      srccredit="Jon Lapham" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>Find Customer Window</phrase>
	    </textobject>
	    <caption>
	       <para>Find Customer Window
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>
 
 <note>
 <para>To return a list of all registered active customers, set the search criterion to "Company Name", "matches regex", and place a single dot "." in the text field area.  Then, click <guibutton>Find</guibutton>.  The regular expression "." means to match anthing.</para>
 </note>
 
 </sect2>
 </sect1>

 <sect1 id="bus_ar_invoices1">
 <title>Invoices</title>
 <para>An invoice is the paperwork you send to a customer requesting payment for a product or services rendered.  GnuCash can be used to generate and track invoices.</para>
 <sect2 id="bus_ar_invoicenew2">
 <title>New</title>
 <para>To send an invoice to a customer, you must first register it.  This is accomplished using the application available at <guimenu>Business</guimenu> -> <guimenu>Customers</guimenu> -> <guimenu>New Invoice</guimenu>.  The New Invoice window should be filled in appropriately:</para>
  <itemizedlist>
  <listitem>
  <para><guilabel>Invoice Info - Invoice ID</guilabel> - the identification number of this invoice (ie: your internal number for this invoice).  If you leave it blank, a number will automatically be generated for it.</para>
  </listitem>
  <listitem>
  <para><guilabel>Invoice Info - Date Opened</guilabel> - the date this Invoice was emitted.</para>
  </listitem>
  <listitem>
  <para><guilabel>Billing Info - Customer</guilabel> - the customer who is to receive this invoice.</para>
  </listitem>
  <listitem>
  <para><guilabel>Billing Info - Job</guilabel> (optional) - the customer job to associate with this invoice.</para>
  </listitem>
  <listitem>
  <para><guilabel>Billing Info - Billing ID</guilabel> - The Billing ID.   ???</para>
  </listitem>
  <listitem>
  <para><guilabel>Billing Info - Terms</guilabel> - the payback terms agreement for this invoice, a list of preregistered terms is available within the popup menu.</para>
  </listitem>
  </itemizedlist>

	<screenshot id="bus_ar_invoicenew">
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="figures/bus_ar_invoicenew.png" 
	      srccredit="Jon Lapham" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>New Invoice Registration Window</phrase>
	    </textobject>
	    <caption>
	       <para>New Invoice Registration Window
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>
 
 <para>Once you fill in all the information for the new invoice, you will be presented with the <guilabel>Edit Invoice</guilabel> window.</para>
  </sect2>

 <sect2 id="bus_ar_invoiceedit2">
  <title>Edit</title>
  <para>From the Edit Invoice window you can enter an itemized list of things you sold on this invoice in a manner similar to how the account register works.</para>
  	<screenshot id="bus_ar_invoiceedit">
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="figures/bus_ar_invoiceedit.png" 
	      srccredit="Jon Lapham" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>Edit Invoice Window</phrase>
	    </textobject>
	    <caption>
	       <para>Edit Invoice Window
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>

  <para>There are 15 columns in the Invoice Entries area:</para>
  <itemizedlist>
  <listitem>
  <para><guilabel>Date</guilabel> - The date this item was sold</para>
  </listitem>
  <listitem>
  <para><guilabel>Invoiced?</guilabel> (unedittable) - <guilabel>X</guilabel> means the item has been invoiced, <guilabel>???</guilabel> means the item has not been invoices (Derek?)</para>
  </listitem>
  <listitem>
  <para><guilabel>Description</guilabel> (optional) - what the item is called</para>
  </listitem>
  <listitem>
  <para><guilabel>Action</guilabel> (optional) - user defined field.  Can place Cost Center info here, or use one of the 3 predefined actions, Hours, Material, or Project.</para>
  </listitem>
  <listitem>
  <para><guilabel>Income Account</guilabel> - which income account is credited with this income</para>
  </listitem>
  <listitem>
  <para><guilabel>Quantity</guilabel> - how many of the items you sold</para>
  </listitem>
  <listitem>
  <para><guilabel>Unit Price</guilabel> - the unit price of the item</para>
  </listitem>
  <listitem>
  <para><guilabel>Discount Type</guilabel> - type of discount, monetary value ($) or percentage (%)</para>
  </listitem>
  <listitem>
  <para><guilabel>Discount How</guilabel> - the discount can be computed after the tax is applied (<guilabel>&gt;</guilabel>), before the tax is applied(<guilabel>&lt;</guilabel>), or the discount and tax can be applied to the pretax value (<guilabel>=</guilabel>)</para>
  </listitem>
  <listitem>
  <para><guilabel>Discount</guilabel> (optional) - total discount (in monetary units or percentage, depending on <guilabel>Discount Type</guilabel>.  You can leave blank for no discount.</para>
  </listitem>
  <listitem>
  <para><guilabel>Taxable?</guilabel> - is this item taxable?  <guilabel>X</guilabel> means yes, a blank field means no.</para>
  </listitem>
  <listitem>
  <para><guilabel>Tax Included?</guilabel> - has the tax already been included in the unit price?  <guilabel>X</guilabel> means yes, a blank field means no.</para>
  </listitem>
  <listitem>
  <para><guilabel>Tax Table</guilabel> (optional) - this is a popup menu of all the available tax tables.  If you set the item as taxable and set that the tax has not been included in the unit price, then this tax table is used to compute the amount of tax.</para>
  </listitem>
  <listitem>
  <para><guilabel>Subtotal</guilabel> (unedittable) - computed subtotal for this item (less tax)</para>
  </listitem>
  <listitem>
  <para><guilabel>Tax</guilabel> (unedittable) - computer tax for this item</para>
  </listitem>
  </itemizedlist>

  <para>When you have finished entering all the items, <guilabel>Post</guilabel> the invoice.</para>
  </sect2>

 <sect2 id="bus_ar_invoicepost2">
  <title>Post</title>

  <para>When you have finished editting an invoice, you must <guilabel>Post</guilabel> the invoice. Posting an invoice will place the invoice transactions into an accounts receivable account.  The Post Invoice window will appear asking you to enter the Post Date, the Due Date, a Description, and Post to Account (from which you can select from a list of A/Receivable accounts).</para>
  	<screenshot id="bus_ar_invoicepost">
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="figures/bus_ar_invoicepost.png" 
	      srccredit="Jon Lapham" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>Post Invoice Window</phrase>
	    </textobject>
	    <caption>
	       <para>Post Invoice Window
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>
  </sect2>

 <sect2 id="bus_ar_invoicefind2">
  <title>Find</title>
  <para>To find a preexisting invoice, use the <guimenu>Business</guimenu> -> <guimenu>Customers</guimenu> -> <guimenu>Find Invoices</guimenu> application.  From the results of the search, you can select an invoice to edit, or view. </para>
  <note>
  <para>Before you can edit a preexisting invoice, you will need to unpost it.</para>
  </note>
 </sect2>

 <sect2 id="bus_ar_invoiceprint2">
 <title>Print</title>
  <para>After you have posted an invoice, you can print an invoice from 2 places; from the Edit Invoice window using the <guibutton>Print</guibutton> button, or from within the Process Payment dialogue.  See the later section in this chapter on the Process Payment dialog for instructions on printing.</para>
  <para>An example of the default Gnucash invoice print output is shown below.</para>

  	<screenshot id="bus_ar_invoiceprint">
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="figures/bus_ar_invoiceprint.png" 
	      srccredit="Jon Lapham" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>Invoice Print Output</phrase>
	    </textobject>
	    <caption>
	       <para>Invoice Print Output
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>
  <note>
  <para>You can modify the appearance of the invoice, ie: add a company logo, etc.  To do so, see the section in this chapter entitled "Changing the Invoice Appearance".</para>
  </note>
 </sect2>

 <sect2 id="bus_ar_invoicestarting2">
 <title>Assign Starting Invoice Number</title>
  <para>There is no easy way to assign an automatic starting invoice number.  GnuCash will start with number 1 and increment from there.  You can override the invoice number by typing an invoice number into the text box each time you create an invoice, but this is bound to get tiring and will sooner or later lead to duplicate numbers.</para>
  <para>If, however, it is important that you be able to change the invoice starting number, there is a way, but unfortunately there is no UI interface to do it.  You have to hand edit your XML data file (it should be right at the beginning of the file in the "counters" section). </para>
 </sect2>
  </sect1>

 <sect1 id="bus_ar_jobs1">
 <title>Customer Jobs</title>
  <para>You can use the optional GnuCash feature called Customer Jobs to associate invoices which fall under a single customer.  This is useful for when you have multiple "jobs" for the same customer, and would like to view all the invoices for one job.</para>
  <para>To use customer jobs, you must create them using the <guimenu>Business</guimenu> -> <guimenu>Customers</guimenu> -> <guimenu>New Jobs</guimenu> application.  Once there, you will see the <guilabel>New Job</guilabel> window.  The edittable fields are:</para>
   <itemizedlist>
   <listitem>
   <para><guilabel>Job Info - Job Number</guilabel> (optional) - enter the number for this job.  If left blank, a reasonable number will be chosen for you.</para>
   </listitem>
   <listitem>
   <para><guilabel>Job Info - Job Name</guilabel> - the name you want to call this job.</para>
   </listitem>
   <listitem>
   <para><guilabel>Owner Info - Customer</guilabel> - the customer associated with this  job.</para>
   </listitem>
   <listitem>
   <para><guilabel>Owner Info - Billing ID</guilabel> - ??? Derek?.</para>
   </listitem>
   <listitem>
   <para><guilabel>Job Active</guilabel> - toggles this job being active or not.  This is useful to use when you have lots of inactive jobs, it is easier to find all the active ones.</para>
   </listitem>
   </itemizedlist>

  	<screenshot id="bus_ar_jobnew">
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="figures/bus_ar_jobnew.png" 
	      srccredit="Jon Lapham" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>New Customer Job</phrase>
	    </textobject>
	    <caption>
	       <para>New Customer Job
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>

  <para>To find a preexisting customer job, use the <guimenu>Business</guimenu> -> <guimenu>Customer</guimenu> -> <guimenu>Find Job</guimenu> application.  From the results of the search, you can select a job to edit, or view.</para>
  </sect1>

 <sect1 id="bus_ar_payment1">
 <title>Process Payment</title>
  <para>Eventually, you will receive payment from your customers for outstanding invoices.  To register these payments, use the Process Payment application found in <guimenu>Business</guimenu> -> <guimenu>Customers</guimenu> -> <guimenu>Process Payment</guimenu>.</para>
  <para>The Process Payment application consists of:</para>
  <itemizedlist>
  <listitem>
  <para><guilabel>Payment Info - Customer</guilabel> - the customer who paid you.</para>
  </listitem>
  <listitem>
  <para><guilabel>Payment Info - Date</guilabel> - the date you you received payment, normally the current date.</para>
  </listitem>
  <listitem>
  <para><guilabel>Payment Info - Amount</guilabel> - the amount of money received.</para>
  </listitem>
  <listitem>
  <para><guilabel>Payment Info - Num</guilabel> - the check number.</para>
  </listitem>
  <listitem>
  <para><guilabel>Payment Info - Memo</guilabel> - any comments about this payment.</para>
  </listitem>
  <listitem>
  <para><guilabel>Post To</guilabel> - the A/Receivable account to post this transaction.</para>
  </listitem>
  <listitem>
  <para><guilabel>Transfer Account</guilabel> - the account where the money will be deposited to (a checking account for example) from this payment.</para>
  </listitem>
  </itemizedlist>
  
  <para>Below is the GnuCash Accounts Receivable payment window.</para>
  	<screenshot id="bus_ar_payment">
	  <mediaobject>
	    <imageobject>
	      <imagedata fileref="figures/bus_ar_payment.png" 
	      srccredit="Jon Lapham" format="PNG"/>
            </imageobject>
	    <textobject>
	        <phrase>Process Payment</phrase>
	    </textobject>
	    <caption>
	       <para>Process Payment Window
	       </para>
	    </caption>
          </mediaobject>
        </screenshot>

  <note>
  <para>One of the design goals in GnuCash's Account Receivable system was to allow different processes to get to the same state, so you can reach an invoice from different directions based on the way you think about the problem:</para>
  <literallayout>
  * you can search for the customer first, then list their invoices
  * you can search for invoices by number
  * you can search for invoices by company name

  Or, if you prefer, you could

  * you can create a new invoice and then select the customer
  * you can search for a customer, view their invoices, then click "new invoice"
  </literallayout>
  </note>

 </sect1>

 <sect1 id="bus_ar_invoicechange1">
 <title>Changing the Invoice Appearance</title>
 <para>
The default Invoice style seems to leave the top part of the form blank, so that you can use pre-printed stationery.  If you go to File, Properties, then you can enter your company name and address, which will then be printed on the righthand side of the invoices.   If you do not want to go to the expense of using pre-printed stationery, then you can modify the style sheets and add a Background, Heading Banner and Logo.  So, run the Gimp and create some graphics.  I tried GIF and PNG images, both worked with GNU Cash.  Remember to keep it simple...
 </para>
 <para>
I found that when using the Default style sheet, it prints the company name and address  (See Configuration above) a bit too far to the right, which does not look good.  When using the Technicolor style sheet, the company name and address prints with better allignment, but then you have to select it every time you want to go and print an invoice. 
 </para>
 <para>
The solution to this conundrum is to create a new style sheet and name it Default.  Note that the default style sheet cannot be deleted, but you can make a new one with the same name.  When you create the new default style sheet, select the fancy type, which is the same as the technicolor style sheet and then add the logo and banner graphics as detailed below.
 </para>
 <para>
When playing with the graphics, I had a terrible time to get things to work right.  Eventually, I found that the graphics resolution is required to be some unknown, magic quantity which probably has something to do with the resolution of your printer.  A high resolution of 600dpi graphic - same as the printer - does not work.  A low resolution of 72dpi looks good on screen but prints too small, while 150dpi looks too big on screen but prints better.  Oodles of patience is required with this feature...
 </para>
 <para>
The idea seems to be that the Logo will print in the left top corner.  This graphic should be small, about a square cm or so.  The banner, will print accross the top of the page and should be about 6 inches wide and 0.5 inch high.  Don't bother trying the background feature.  I found that if there is no logo, I get a faint square on the invoice.  If I make an empty transparent square logo of .25 by .25 inches, then this faint outline may/may not go away.  It seems that the only reliable way to make this outline go away, is to create a real logo and use it.  Text in the banner prints fuzzy and small text is unreadable, so keep text large for best results. 
 </para>
 <para>
Now click Edit, Style Sheets and select your graphics, then go and try it, to see what it looks like.  Quite a bit of experimentation will be required.  When you print the invoice, you can select the style sheet to use from the Options menu.  Whatever you do, it remains kind of unsatisfactory, but at some point you have to give up and live with it.  If it really annoys you, use pre-printed forms.
 </para>
 <para>
Cleaning things up:
After all of the above experimentation, you may have a bunch of unwanted test invoices.  There is no way to completely get rid of them, but you can make them disappear.  To remove an invoice from accounts receivable, you have to edit the invoice and then click the Un Post button.  To make a test vendor or invoice disappear from searches, you have to unmark the Active flag.  The data will still be in the accounting file, but it won't bother you anymore.
 </para>
  </sect1>

 </chapter>
